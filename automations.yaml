- id: '1610295461457'
  alias: Motion - Toilet
  description: Turn on light when motion is detected, dim after inactivity and turn
    off after a delay
  trigger:
  - platform: state
    entity_id: binary_sensor.toilet_motion_sensor
    from: 'off'
    to: 'on'
  condition: []
  action:
  - service: adaptive_lighting.apply
    data:
      lights: light.toilet_lamp
      entity_id: switch.adaptive_lighting_ruimten
  - service: light.turn_on
    data:
      entity_id: light.toilet_lamp
  - wait_for_trigger:
    - platform: state
      entity_id: binary_sensor.toilet_motion_sensor
      from: 'on'
      to: 'off'
      for:
        hours: 0
        minutes: 1
        seconds: 0
        milliseconds: 0
  - condition: state
    entity_id: light.toilet_lamp
    state: 'on'
  - service: light.turn_on
    data_template:
      entity_id: light.toilet_lamp
      brightness: '{{ (state_attr(''light.toilet_lamp'', ''brightness'') / 2) | int
        }}'
  - delay: 00:01:00
  - service: light.turn_off
    target:
      entity_id: light.toilet_lamp
  mode: restart
- id: '1610296743694'
  alias: Motion - Gang (generic)
  description: Turn on light when motion is detected, dim after inactivity and turn
    off after a delay
  trigger:
  - platform: state
    entity_id: binary_sensor.gang_motion_sensor
    from: 'off'
    to: 'on'
  condition:
  - condition: numeric_state
    entity_id: sensor.gang_light_sensor
    below: '50'
  action:
  - service: script.generic_component_motion
    data:
      lights: light.gang_lamp
      adaptive_lighting: switch.adaptive_lighting_ruimten
      motion_sensor: binary_sensor.gang_motion_sensor
      seconds_before_off: 30
  mode: restart
- id: '1610298075630'
  alias: Motion - Overloop (lux)
  description: Turn on light when motion is detected, dim after inactivity and turn
    off after a delay
  trigger:
  - platform: state
    entity_id: binary_sensor.overloop_motion_sensor
    from: 'off'
    to: 'on'
  condition:
  - condition: numeric_state
    entity_id: sensor.overloop_light_sensor
    below: '50'
  action:
  - service: adaptive_lighting.apply
    data:
      lights: light.overloop_lamp
      entity_id: switch.adaptive_lighting_ruimten
  - service: light.turn_on
    data: {}
    target:
      entity_id: light.overloop_lamp
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.home_state_occupancy
        state: Sleeping
      sequence:
      - wait_for_trigger:
        - platform: state
          entity_id: binary_sensor.overloop_motion_sensor
          from: 'on'
          to: 'off'
    default:
    - wait_for_trigger:
      - platform: state
        entity_id: binary_sensor.overloop_motion_sensor
        from: 'on'
        to: 'off'
        for:
          hours: 0
          minutes: 0
          seconds: 30
          milliseconds: 0
  - condition: state
    entity_id: light.overloop_lamp
    state: 'on'
  - service: light.turn_on
    data_template:
      entity_id: light.overloop_lamp
      brightness: '{{ (state_attr(''light.overloop_lamp'', ''brightness'') / 2) |
        int }}'
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.home_state_occupancy
        state: Sleeping
      sequence:
      - delay:
          hours: 0
          minutes: 0
          seconds: 5
          milliseconds: 0
    default:
    - delay:
        hours: 0
        minutes: 0
        seconds: 30
        milliseconds: 0
  - service: light.turn_off
    data:
      entity_id: light.overloop_lamp
  mode: restart
- id: '1610308330940'
  alias: Reset Control - Woonkamer
  description: Turn off control switch when light turns off
  trigger:
  - platform: state
    entity_id: light.woonkamer_groep
    from: 'on'
    to: 'off'
  condition: []
  action:
  - service: switch.turn_on
    data: {}
    target:
      entity_id:
      - switch.begane_grond_adaptive_lighting
  - service: input_select.select_option
    target:
      entity_id:
      - input_select.woonkamer_scenes
      - input_select.play_gradient_scenes
    data:
      option: Adaptive Lighting
  mode: single
- id: '1610308361097'
  alias: Reset Control - Studiekamer
  description: Turn off control switch when light turns off or motion hasn't been
    detected for an hour
  trigger:
  - platform: state
    entity_id: light.studiekamer_groep
    from: 'on'
    to: 'off'
  - platform: state
    entity_id: binary_sensor.studiekamer_motion_sensor
    from: 'on'
    to: 'off'
    for:
      hours: 1
      minutes: 0
      seconds: 0
      milliseconds: 0
  condition: []
  action:
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.studiekamer_control
  - service: input_select.select_option
    target:
      entity_id: input_select.studiekamer_scenes
    data:
      option: Adaptive Lighting
  mode: single
- id: '1610308456079'
  alias: Reset Control - Slaapkamer
  description: Turn off control switch when light turns off
  trigger:
  - platform: state
    entity_id: light.slaapkamer_groep
    from: 'on'
    to: 'off'
  condition: []
  action:
  - service: input_select.select_option
    target:
      entity_id: input_select.slaapkamer_scenes
    data:
      option: Adaptive Lighting
  - condition: state
    entity_id: input_select.home_state_occupancy
    state: Home
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.slaapkamer_control
  mode: single
- id: '1610308504939'
  alias: Reset Control - Badkamer
  description: Turn off control switch when light turns off or motion hasn't been
    detected for an hour
  trigger:
  - platform: state
    entity_id: light.badkamer_lamp
    from: 'on'
    to: 'off'
  - platform: state
    entity_id: binary_sensor.badkamer_motion_sensor
    from: 'on'
    to: 'off'
    for:
      hours: 1
      minutes: 0
      seconds: 0
      milliseconds: 0
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_boolean.badkamer_control
      state: 'on'
    - condition: state
      entity_id: binary_sensor.badkamer_occupancy
      state: 'on'
  action:
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.badkamer_control
  - service: input_boolean.turn_off
    target:
      entity_id: input_boolean.douche_occupancy_state
  mode: single
- id: '1610310358560'
  alias: Occupancy - Slaapkamer (state)
  description: Turn on light when activity is detected, dim after inactivity and turn
    off after a delay
  trigger:
  - platform: state
    entity_id: binary_sensor.slaapkamer_occupancy
    from: 'off'
    to: 'on'
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.home_state
      state: Evening
    - condition: state
      entity_id: input_select.home_state
      state: Night
  action:
  - service: adaptive_lighting.apply
    data:
      lights: light.slaapkamer_groep
    entity_id: switch.adaptive_lighting_slaapkamer
  - service: light.turn_on
    data:
      entity_id: light.slaapkamer_groep
  - wait_for_trigger:
    - platform: state
      entity_id: binary_sensor.slaapkamer_occupancy
      from: 'on'
      to: 'off'
      for: 00:01:00
  - condition: state
    entity_id: light.slaapkamer_groep
    state: 'on'
  - condition: state
    entity_id: light.slaapkamer_groep
    state: 'on'
  - service: light.turn_on
    data_template:
      entity_id: light.slaapkamer_groep
      brightness: '{{ (state_attr(''light.slaapkamer_groep'', ''brightness'') / 2)
        | int }}'
  - delay: 00:00:30
  - service: light.turn_off
    data:
      entity_id: light.slaapkamer_groep
  mode: restart
- id: '1610310518317'
  alias: Occupancy - Badkamer
  description: Turn on light when activity is detected, dim after inactivity and turn
    off after a delay
  trigger:
  - platform: state
    entity_id: binary_sensor.badkamer_occupancy
    from: 'off'
    to: 'on'
  condition: []
  action:
  - service: adaptive_lighting.apply
    data:
      lights: light.badkamer_lamp
      entity_id: switch.adaptive_lighting_ruimten
  - service: light.turn_on
    data: {}
    target:
      entity_id: light.badkamer_lamp
  - wait_for_trigger:
    - platform: state
      entity_id: binary_sensor.badkamer_occupancy
      from: 'on'
      to: 'off'
      for: 00:01:00
  - condition: state
    entity_id: light.badkamer_lamp
    state: 'on'
  - service: light.turn_on
    data_template:
      entity_id: light.badkamer_lamp
      brightness: '{{ (state_attr(''light.badkamer_lamp'', ''brightness'') / 2) |
        int }}'
  - delay:
      hours: 0
      minutes: 0
      seconds: 30
      milliseconds: 0
  - service: light.turn_off
    data:
      entity_id: light.badkamer_lamp
  mode: restart
- id: '1610311748353'
  alias: Occupancy - Zolder (state)
  description: Turn on light when activity is detected, dim after inactivity and turn
    off after a delay
  trigger:
  - platform: state
    entity_id: binary_sensor.zolder_occupancy
    from: 'off'
    to: 'on'
  condition:
  - condition: numeric_state
    entity_id: sensor.zolder_light_sensor
    below: '20'
  action:
  - service: light.turn_on
    target:
      entity_id: light.zolder_groep
  - delay:
      hours: 0
      minutes: 0
      seconds: 2
      milliseconds: 0
  - service: adaptive_lighting.apply
    data:
      lights: light.zolder_groep
      entity_id: switch.adaptive_lighting_ruimten
  - wait_for_trigger:
    - platform: state
      entity_id: binary_sensor.zolder_occupancy
      from: 'on'
      to: 'off'
      for: 00:00:30
  - condition: state
    entity_id: light.zolder_groep
    state: 'on'
  - service: light.turn_on
    data_template:
      entity_id: light.zolder_groep
      brightness: '{{ (state_attr(''light.zolder_groep'', ''brightness'') / 2) | int
        }}'
  - delay: 00:00:30
  - service: light.turn_off
    data: {}
    target:
      entity_id:
      - light.zolder_groep
  mode: restart
- id: '1610330780312'
  alias: Contact Sensor - Bed Occupancy State
  description: Set the correct state to the Withings Sleep sensor at boot
  trigger:
  - platform: homeassistant
    event: start
  - platform: state
    entity_id: binary_sensor.withings_in_bed_veste
    to: unavailable
  condition: []
  action:
  - service: python_script.set_state
    data_template:
      entity_id: binary_sensor.withings_in_bed_veste
      state: 'off'
  mode: single
- id: '1610533060447'
  alias: deCONZ - Woonkamer SYMFONISK Controller
  description: Controller to control music playback
  use_blueprint:
    path: L-Carslake/deconz-ikea-symfonisk.yaml
    input:
      remote: 65b90502299bd5bde8f71041bf62be96
      button_single_press:
      - choose:
        - conditions:
          - condition: state
            entity_id: media_player.sonos_arc
            state: playing
          sequence:
          - service: media_player.media_pause
            target:
              entity_id: media_player.sonos_arc
        default:
        - service: media_player.media_play
          target:
            entity_id: media_player.sonos_arc
      button_double_press:
      - service: media_player.media_next_track
        data: {}
        target:
          entity_id:
          - media_player.sonos_arc
      button_triple_press:
      - service: media_player.media_previous_track
        data: {}
        target:
          entity_id:
          - media_player.sonos_arc
      rotate_clockwise_start:
      - service: media_player.volume_up
        data: {}
        target:
          entity_id:
          - media_player.sonos_arc
      rotate_anticlockwise_start:
      - service: media_player.volume_down
        data: {}
        target:
          entity_id:
          - media_player.sonos_arc
- id: '1612819105738'
  alias: Trend Entity - Badkamer Hygrostat
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.badkamer_hygrostat
    to: 'on'
    from: 'off'
  - platform: numeric_state
    entity_id: sensor.badkamer_humidity_multi_sensor
    above: '98'
  condition: []
  action:
  - service: input_boolean.turn_on
    data: {}
    entity_id: input_boolean.douche_occupancy_state
  - delay:
      hours: 1
      minutes: 0
      seconds: 0
      milliseconds: 0
  - service: input_boolean.turn_off
    target:
      entity_id: input_boolean.douche_occupancy_state
  mode: restart
- id: '1613053612207'
  alias: Reset Control - Zolder
  description: Turn off control switch when light turns off
  trigger:
  - platform: state
    entity_id: light.zolder_groep
    from: 'on'
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.zolder_control
    state: 'on'
  action:
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.zolder_control
  mode: single
- id: '1613139301090'
  alias: Occupancy - Kledingkamer (generic)
  description: Turn on light when activity is detected, dim after inactivity and turn
    off after a delay
  trigger:
  - platform: state
    entity_id: binary_sensor.kledingkamer_occupancy
    to: 'on'
    from: 'off'
  condition:
  - condition: numeric_state
    entity_id: sensor.kledingkamer_light_sensor
    below: '50'
  action:
  - service: script.generic_component_motion
    data:
      lights: light.kledingkamer_groep
      adaptive_lighting: switch.adaptive_lighting_ruimten
      motion_sensor: binary_sensor.kledingkamer_occupancy
      seconds_before_dimmed: 30
      seconds_before_off: 30
  mode: restart
- id: '1613139430261'
  alias: Reset Control - Kledingkamer
  description: Turn off control switch when light turns off or motion hasn't been
    detected for an hour
  trigger:
  - platform: state
    entity_id: light.kledingkamer_groep
    from: 'on'
    to: 'off'
  - platform: state
    entity_id: binary_sensor.kledingkamer_motion_sensor
    from: 'on'
    to: 'off'
    for:
      hours: 1
      minutes: 0
      seconds: 0
      milliseconds: 0
  condition:
  - condition: state
    entity_id: input_boolean.kledingkamer_control
    state: 'on'
  action:
  - service: input_boolean.turn_off
    entity_id: input_boolean.kledingkamer_control
  mode: single
- id: '1613407001603'
  alias: Contact Sensor - Trapkast
  description: Turn on light when door is open, and turn off when door is closed
  trigger:
  - platform: state
    entity_id: binary_sensor.trapkast_sensor
    from: 'off'
    to: 'on'
  condition: []
  action:
  - service: light.turn_on
    target:
      entity_id: light.trapkast_lamp
    data:
      brightness_pct: 100
  - wait_for_trigger:
    - platform: state
      entity_id: binary_sensor.trapkast_sensor
      from: 'on'
      to: 'off'
  - service: light.turn_off
    data:
      entity_id: light.trapkast_lamp
  mode: restart
- id: '1613545624056'
  alias: Security - Alarm PENDING
  description: Automation to trigger the security system
  trigger:
  - platform: state
    entity_id: binary_sensor.voordeur_sensor
    from: 'off'
    to: 'on'
  - platform: state
    entity_id: binary_sensor.achterdeur_sensor
    from: 'off'
    to: 'on'
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: alarm_control_panel.security_system
      state: armed_home
    - condition: state
      entity_id: alarm_control_panel.security_system
      state: armed_away
    - condition: state
      entity_id: alarm_control_panel.security_system
      state: armed_night
  action:
  - service: alarm_control_panel.alarm_trigger
    data: {}
    entity_id: alarm_control_panel.security_system
  mode: single
- id: '1613546123645'
  alias: Security - Alarm DISARMED
  description: Automation to disarm the security system
  trigger:
  - platform: state
    entity_id: alarm_control_panel.security_system
    from: triggered
    to: disarmed
  condition: []
  action:
  - service: media_player.media_stop
    data: {}
    target:
      entity_id:
      - media_player.sonos_roam
      - media_player.ikea_symfonisk
      - media_player.sonos_arc
  - service: sonos.restore
    data:
      entity_id: media_player.ikea_symfonisk, media_player.sonos_roam, media_player.sonos_arc
  mode: single
- id: '1613724944074'
  alias: deCONZ - Security Hue Button
  description: Button to enable and disable the alarm system
  trigger:
  - device_id: 4945d96ec9acaa3fb3aef0184d00e467
    domain: deconz
    platform: device
    type: remote_button_short_press
    subtype: turn_on
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: alarm_control_panel.security_system
        state: disarmed
      sequence:
      - service: alarm_control_panel.alarm_arm_home
        data: {}
        entity_id: alarm_control_panel.security_system
      - service: sonos.snapshot
        data:
          entity_id: media_player.sonos_arc
      - service: media_player.volume_set
        data:
          volume_level: 0.2
        target:
          entity_id:
          - media_player.sonos_arc
      - service: tts.cloud_say
        data:
          entity_id: media_player.sonos_arc
          message: Alarm ingeschakeld over 1 minuut
          options:
            gender: female
      - delay:
          hours: 0
          minutes: 0
          seconds: 5
          milliseconds: 0
      - wait_template: '{{ is_state(''media_player.sonos_arc'', ''paused'') }}'
      - service: sonos.restore
        data:
          entity_id: media_player.sonos_arc
    - conditions:
      - condition: state
        entity_id: alarm_control_panel.security_system
        state: triggered
      sequence:
      - service: alarm_control_panel.alarm_disarm
        data: {}
        target:
          entity_id: alarm_control_panel.security_system
    default:
    - service: alarm_control_panel.alarm_disarm
      data: {}
      entity_id: alarm_control_panel.security_system
    - service: sonos.snapshot
      data:
        entity_id: media_player.sonos_arc
    - service: media_player.volume_set
      data:
        volume_level: 0.2
      target:
        entity_id:
        - media_player.sonos_arc
    - service: tts.cloud_say
      data:
        entity_id: media_player.sonos_arc
        message: Alarm uitgeschakeld
        options:
          gender: female
    - delay:
        hours: 0
        minutes: 0
        seconds: 3
        milliseconds: 0
    - wait_template: '{{ is_state(''media_player.sonos_arc'', ''paused'') }}'
    - service: sonos.restore
      data:
        entity_id: media_player.sonos_arc
  mode: restart
- id: '1614153754568'
  alias: Security - Camera Access ENABLED
  description: Automation to allow the camera on the network
  trigger:
  - platform: state
    entity_id: alarm_control_panel.security_system
    from: disarmed
    to: armed_night
  - platform: state
    entity_id: alarm_control_panel.security_system
    from: arming
    to: armed_home
  - platform: state
    entity_id: alarm_control_panel.security_system
    to: armed_away
    from: disarmed
  condition: []
  action:
  - service: switch.turn_on
    target:
      entity_id:
      - switch.security_cam
  mode: single
- id: '1614153848468'
  alias: Security - Camera Access DISABLED
  description: Automation to disallow the camera on the network
  trigger:
  - platform: state
    entity_id: alarm_control_panel.security_system
    from: armed_night
    to: disarmed
  - platform: state
    entity_id: alarm_control_panel.security_system
    from: armed_home
    to: disarmed
  - platform: state
    entity_id: alarm_control_panel.security_system
    from: armed_away
    to: disarmed
  - platform: state
    entity_id: alarm_control_panel.security_system
    from: pending
    to: disarmed
  condition: []
  action:
  - service: switch.turn_off
    target:
      entity_id:
      - switch.security_cam
  - service: input_boolean.turn_off
    target:
      entity_id: input_boolean.homekit_cam_motion_sensor
  mode: single
- id: '1614632132577'
  alias: deCONZ - Smart Plug Waterkoker
  description: Automation to turn off the kettle after heating water
  trigger:
  - platform: numeric_state
    entity_id: sensor.keuken_smart_plug_power
    below: '10'
  condition: []
  action:
  - service: switch.turn_off
    target:
      entity_id: switch.keuken_smart_plug
  mode: single
- id: '1615073014112'
  alias: Heater - Open Door Detection
  description: Turn off central heating when the door is opened
  trigger:
  - platform: state
    entity_id: binary_sensor.achterdeur_sensor
    from: 'off'
    to: 'on'
    for:
      hours: 0
      minutes: 0
      seconds: 10
      milliseconds: 0
  condition:
  - condition: state
    entity_id: climate.woonkamer_centrale_verwarming
    state: heating
    attribute: hvac_action
  action:
  - service: climate.turn_off
    target:
      entity_id:
      - climate.woonkamer_centrale_verwarming
  - wait_for_trigger:
    - platform: state
      entity_id: binary_sensor.achterdeur_sensor
      from: 'on'
      to: 'off'
      for:
        hours: 0
        minutes: 0
        seconds: 10
        milliseconds: 0
  - service: climate.turn_on
    target:
      entity_id:
      - climate.woonkamer_centrale_verwarming
  mode: single
- id: '1625428959292'
  alias: deCONZ - Woonkamer STYRBAR Remote
  description: Remote to control light(s)
  use_blueprint:
    path: Gabriel/deconz-ikea-styrbar.yaml
    input:
      remote: 3c1f034b39c89c5835be5b4351bf3a9d
      adaptive_lighting:
        entity_id: switch.begane_grond_adaptive_lighting
      light:
        entity_id:
        - light.woonkamer_groep
      left_arrow_button:
      - service: input_select.select_previous
        target:
          entity_id: input_select.woonkamer_scenes
      right_arrow_button:
      - service: input_select.select_next
        target:
          entity_id: input_select.woonkamer_scenes
- id: '1627321581842'
  alias: deCONZ - Zolder TRADFRI Switch
  description: Switch to control light(s)
  use_blueprint:
    path: Gabriel/deconz-ikea-button-switch.yaml
    input:
      remote: 559a4be4411b630d157ed8f8f621c362
      take_control:
        entity_id: input_boolean.zolder_control
      light: light.zolder_groep
      adaptive_lighting: switch.adaptive_lighting_ruimten
- id: '1627322341754'
  alias: deCONZ - Kledingkamer Hue Dimmer
  description: Switch to control light(s)
  use_blueprint:
    path: Gabriel/deconz-hue-remote-v2.yaml
    input:
      remote: 23b34e4cb42c9c467057cedc2de11b0e
      light: light.kledingkamer_groep
      take_control:
        entity_id: input_boolean.kledingkamer_control
      adaptive_lighting: switch.adaptive_lighting_ruimten
- id: '1627322518980'
  alias: deCONZ - Studiekamer Hue Dimmer
  description: Switch to control light(s)
  use_blueprint:
    path: Gabriel/deconz-hue-remote-v2.yaml
    input:
      remote: d66a9e3534608466009b2cbbc55b21ca
      light: light.studiekamer_groep
      take_control:
        entity_id: input_boolean.studiekamer_control
      adaptive_lighting: switch.adaptive_lighting_ruimten
      button_hue:
      - service: input_select.select_next
        target:
          entity_id: input_select.studiekamer_scenes
      button_power_hold:
      - choose:
        - conditions:
          - condition: template
            value_template: '{{ state_attr(''climate.studiekamer_radiator'', ''temperature'')
              == states(''input_number.climate_comfort'')|float(0) }}'
          sequence:
          - service: script.generic_component_climate
            data:
              climate:
                entity_id: climate.studiekamer_radiator
              mode: Away
        default:
        - service: script.generic_component_climate
          data:
            climate:
              entity_id: climate.studiekamer_radiator
            mode: Comfort
- id: '1627322789979'
  alias: deCONZ - Slaapkamer Hue Dimmer
  description: Switch to control light(s)
  use_blueprint:
    path: Gabriel/deconz-hue-remote-v2.yaml
    input:
      remote: 7acaad766f1ef257cc8b639725f0c1bf
      light: light.slaapkamer_groep
      take_control:
        entity_id: input_boolean.slaapkamer_control
      adaptive_lighting: switch.adaptive_lighting_slaapkamer
      button_hue_hold: []
      button_hue:
      - service: input_select.select_next
        target:
          entity_id:
          - input_select.slaapkamer_scenes
      button_power_hold:
      - choose:
        - conditions:
          - condition: template
            value_template: '{{ state_attr(''climate.slaapkamer_radiator'', ''temperature'')
              == states(''input_number.climate_comfort'')|float(0) }}'
          sequence:
          - service: script.generic_component_climate
            data:
              climate:
                entity_id: climate.slaapkamer_radiator
              mode: Away
        default:
        - service: script.generic_component_climate
          data:
            climate:
              entity_id: climate.studiekamer_radiator
            mode: Eco
- id: '1629971132565'
  alias: '@ Home Assistant Startup'
  description: Actions to run at boot
  trigger:
  - platform: homeassistant
    event: start
  condition: []
  action:
  - service: hassio.addon_stdin
    data:
      addon: 15d21743_samba_backup
      input: restore-sensor
  - service: script.turn_on
    target:
      entity_id:
      - script.logic_set_device_tracker_state
  - service: notify.notify
    data_template:
      message: delete_alert
      data:
        push:
          badge: '{{ states(''sensor.software_update_badge'') }}'
  mode: single
- id: '1630663148251'
  alias: '@ HomeKit - Lighting Take Control (Ruimten)'
  description: Take manual control of lights when changed in HomeKit
  trigger:
  - platform: event
    event_type: homekit_state_change
    event_data:
      entity_id: light.studiekamer_groep
      service: turn_on
    id: studiekamer
  - platform: event
    event_type: homekit_state_change
    event_data:
      entity_id: light.studiekamer_lamp
      service: turn_on
    id: studiekamer
  - platform: event
    event_type: homekit_state_change
    event_data:
      entity_id: light.studiekamer_bureauspot
      service: turn_on
    id: studiekamer
  - platform: event
    event_type: homekit_state_change
    event_data:
      entity_id: light.studiekamer_hektar_bureaulamp
      service: turn_on
    id: studiekamer
  - platform: event
    event_type: homekit_state_change
    event_data:
      entity_id: light.studiekamer_lightstrip_plus
      service: turn_on
    id: studiekamer
  - platform: event
    event_type: homekit_state_change
    event_data:
      entity_id: light.kledingkamer_groep
      service: turn_on
    id: kledingkamer
  - platform: event
    event_type: homekit_state_change
    event_data:
      entity_id: light.kledingkamer_staande_lamp
      service: turn_on
    id: kledingkamer
  - platform: event
    event_type: homekit_state_change
    event_data:
      entity_id: light.kledingkamer_lamp
      service: turn_on
    id: kledingkamer
  - platform: event
    event_type: homekit_state_change
    event_data:
      entity_id: light.keuken_lamp
      service: turn_on
    id: keuken
  - platform: event
    event_type: homekit_state_change
    event_data:
      entity_id: light.keuken_afzuigkap_l
      service: turn_on
    id: keuken
  - platform: event
    event_type: homekit_state_change
    event_data:
      entity_id: light.keuken_afzuigkap_r
      service: turn_on
    id: keuken
  - platform: event
    event_type: homekit_state_change
    event_data:
      entity_id: light.badkamer_lamp
      service: turn_on
    id: badkamer
  condition:
  - condition: or
    conditions:
    - condition: template
      value_template: '{{ trigger.event.data.value.startswith(''Set state to 1, brightness'')
        }}'
    - condition: template
      value_template: '{{ trigger.event.data.value.startswith(''color temperature'')
        }}'
    - condition: template
      value_template: '{{ trigger.event.data.value.startswith(''set color at'') }}'
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: studiekamer
      sequence:
      - service: adaptive_lighting.set_manual_control
        data:
          entity_id: switch.adaptive_lighting_ruimten
          lights: light.studiekamer_groep
      - service: input_boolean.turn_on
        target:
          entity_id: input_boolean.studiekamer_control
    - conditions:
      - condition: trigger
        id: kledingkamer
      sequence:
      - service: adaptive_lighting.set_manual_control
        data:
          entity_id: switch.adaptive_lighting_ruimten
          lights: light.kledingkamer_groep
      - service: input_boolean.turn_on
        target:
          entity_id: input_boolean.kledingkamer_control
    - conditions:
      - condition: trigger
        id: keuken
      sequence:
      - service: adaptive_lighting.set_manual_control
        data:
          entity_id: switch.adaptive_lighting_ruimten
          lights: light.keuken_groep
      - service: input_boolean.turn_on
        target:
          entity_id: input_boolean.keuken_control
    - conditions:
      - condition: trigger
        id: badkamer
      sequence:
      - service: adaptive_lighting.set_manual_control
        data:
          entity_id: switch.adaptive_lighting_ruimten
          lights: light.badkamer_lamp
      - service: input_boolean.turn_on
        target:
          entity_id: input_boolean.badkamer_control
    default: []
  mode: parallel
  max: 10
- id: '1631043092515'
  alias: Motion - Achtertuin
  description: Brighten light when motion is detected, and dim after inactivity
  trigger:
  - platform: state
    entity_id: binary_sensor.achtertuin_motion_sensor
    from: 'off'
    to: 'on'
  condition:
  - condition: state
    entity_id: input_select.home_state
    state: Evening
  - condition: state
    entity_id: switch.party_mode
    state: 'off'
  action:
  - service: light.turn_on
    target:
      entity_id: light.achtertuin_buitenlamp
    data:
      brightness_pct: 100
  - wait_for_trigger:
    - platform: state
      entity_id: binary_sensor.achtertuin_motion_sensor
      from: 'on'
      to: 'off'
      for:
        hours: 0
        minutes: 1
        seconds: 0
        milliseconds: 0
  - condition: state
    entity_id: light.achtertuin_buitenlamp
    state: 'on'
  - service: light.turn_on
    target:
      entity_id: light.achtertuin_buitenlamp
    data:
      brightness_pct: 50
  mode: restart
- id: '1631044148352'
  alias: Motion - Voortuin
  description: Brighten light when motion is detected, and dim after inactivity
  trigger:
  - platform: state
    entity_id: binary_sensor.voortuin_motion_sensor
    from: 'off'
    to: 'on'
  condition:
  - condition: state
    entity_id: input_select.home_state
    state: Evening
  - condition: state
    entity_id: switch.party_mode
    state: 'off'
  action:
  - service: light.turn_on
    target:
      entity_id: light.voortuin_buitenlamp
    data:
      brightness_pct: 100
  - wait_for_trigger:
    - platform: state
      entity_id: binary_sensor.voortuin_motion_sensor
      from: 'on'
      to: 'off'
      for:
        hours: 0
        minutes: 1
        seconds: 0
        milliseconds: 0
  - condition: state
    entity_id: light.voortuin_buitenlamp
    state: 'on'
  - service: light.turn_on
    target:
      entity_id: light.voortuin_buitenlamp
    data:
      brightness_pct: 50
  mode: restart
- id: '1632844874764'
  alias: Notifications - DSM Security Advisor
  description: Notificaton when there is a problem with DSM Security Advisor
  trigger:
  - platform: state
    entity_id: binary_sensor.mesa_security_status
    from: 'off'
    to: 'on'
  condition: []
  action:
  - service: notify.notify
    data:
      message: An issue has been detected with your Synology DSM.
      title: homeOS
      data:
        subtitle: DSM Security Advisor
        group: security_advisor
        url: http://mesa-connect.quickconnect.to
  mode: single
- id: '1633677257665'
  alias: Notifications - Clear update badge
  description: Automation to decrement the iOS app badge when an update has been completed
  trigger:
  - platform: state
    entity_id: binary_sensor.ha_updater
    to: 'off'
  - platform: state
    entity_id: binary_sensor.deconz_update_available
    to: 'off'
  - platform: state
    entity_id: binary_sensor.mesa_update_available
    to: 'off'
  - platform: state
    entity_id: binary_sensor.hacs_updater
    to: 'off'
  condition: []
  action:
  - service: notify.notify
    data_template:
      message: delete_alert
      data:
        push:
          badge: '{{ states(''sensor.software_update_badge'') }}'
  mode: queued
  max: 10
- id: '1633677326484'
  alias: Notifications - Afvalbeheer
  description: Notification when the trash is being picked up the next day
  trigger:
  - platform: time
    at: '18:00'
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: sensor.hvc_morgen
      state: gft
    - condition: state
      entity_id: sensor.hvc_morgen
      state: papier
    - condition: state
      entity_id: sensor.hvc_morgen
      state: pmd
  action:
  - service: notify.notify
    data_template:
      title: homeOS
      message: "{% if is_state_attr('sensor.hvc_gft', 'Days_until', 1) %}\n  {{ 'De\
        \ container voor GFT & etenresten wordt morgen opgehaald rond 07:30.' }}\n\
        {% elif is_state_attr('sensor.hvc_papier', 'Days_until', 1) %}\n  {{ 'De container\
        \ voor papier & karton wordt morgen opgehaald rond 07:30.' }}\n{% elif is_state_attr('sensor.hvc_pmd',\
        \ 'Days_until', 1) %}\n  {{ 'De container voor plastic, blik & drinkpakken\
        \ wordt morgen opgehaald rond 07:30.' }}\n{% endif %}\n"
      data:
        group: containers
  mode: single
- id: '1633677373376'
  alias: Notifications - Backups
  description: Notificaton when a backup is started, finished or a problem occurs
  trigger:
  - platform: state
    entity_id: sensor.samba_backup
    id: backup_start
    from: IDLE
    to: RUNNING
  - platform: state
    entity_id: sensor.samba_backup
    id: backup_successful
    from: RUNNING
    to: SUCCEEDED
  - platform: state
    entity_id: sensor.samba_backup
    id: backup_failed
    from: RUNNING
    to: FAILED
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: backup_start
      sequence:
      - service: notify.notify
        data:
          title: homeOS
          message: A pending backup has been added to the queue.
          data:
            group: backup
            url: /hassio/snapshots
    - conditions:
      - condition: trigger
        id: backup_successful
      sequence:
      - service: notify.notify
        data:
          title: homeOS
          message: A backup of the database and add-ons was succesfully completed.
          data:
            group: backup
            url: /hassio/snapshots
    - conditions:
      - condition: trigger
        id: backup_failed
      sequence:
      - service: notify.notify
        data:
          title: homeOS
          message: The backup of the database and add-ons failed.
          data:
            group: backup
            url: /hassio/snapshots
    default: []
  mode: parallel
  max: 10
- id: '1634294358210'
  alias: Reset Control - Keuken
  description: Turn off control switch when light turns off or motion hasn't been
    detected for an hour
  trigger:
  - platform: state
    entity_id: light.keuken_groep
    from: 'on'
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.keuken_control
    state: 'on'
  action:
  - service: input_boolean.turn_off
    data: {}
    target:
      entity_id:
      - input_boolean.keuken_control
  mode: single
- id: '1634295922342'
  alias: Occupancy - Keuken (generic)
  description: Turn on light when activity is detected, dim after inactivity and turn
    off after a delay
  trigger:
  - platform: state
    entity_id: binary_sensor.keuken_occupancy
    from: 'off'
    to: 'on'
  condition:
  - condition: numeric_state
    entity_id: sensor.keuken_light_sensor
    below: '200'
  action:
  - service: script.generic_component_motion
    data:
      lights: light.keuken_groep
      adaptive_lighting: switch.adaptive_lighting_ruimten
      motion_sensor: binary_sensor.keuken_occupancy
      seconds_before_off: 30
  mode: restart
- id: '1634823925779'
  alias: Home State - Evening
  description: Automatically set Home State to Evening when dark enough
  trigger:
  - type: illuminance
    platform: device
    device_id: 5bad195497158799dbb8f7a1c55df130
    entity_id: sensor.woonkamer_light_sensor
    domain: sensor
    below: 6
    for:
      hours: 0
      minutes: 3
      seconds: 0
      milliseconds: 0
  condition:
  - condition: time
    after: '15:00'
    before: 00:00
  - condition: state
    entity_id: input_select.home_state
    state: Day
  - condition: state
    entity_id: input_boolean.home_state_automatic
    state: 'on'
  action:
  - service: switch.turn_on
    target:
      entity_id: switch.evening_state
  mode: single
- id: '1634823973170'
  alias: Home State - Night (On vacation)
  description: Automatically set Home State to Night while Home State Occupancy is
    set to On vacation
  trigger:
  - platform: time
    at: '23:00'
  condition:
  - condition: state
    entity_id: input_select.home_state_occupancy
    state: On vacation
  action:
  - service: input_select.select_option
    target:
      entity_id: input_select.home_state
    data:
      option: Night
  - delay:
      hours: 0
      minutes: 0
      seconds: 2
      milliseconds: 0
  - service: light.turn_off
    target:
      entity_id:
      - light.woonkamer_groep
      - light.woonkamer_kastverlichting
  mode: single
- id: '1634824004562'
  alias: Home State - Morning
  description: Automatically set Home State to Morning at sunrise
  trigger:
  - platform: sun
    event: sunrise
  condition:
  - condition: state
    entity_id: input_boolean.home_state_automatic
    state: 'on'
  - condition: state
    entity_id: input_select.home_state
    state: Night
  action:
  - service: switch.turn_on
    target:
      entity_id: switch.morning_state
  mode: single
- id: '1634824073011'
  alias: Home State - Day (Away)
  description: Automatically set Home State to Day while Home State Occupancy is set
    to Away
  trigger:
  - platform: time
    at: '12:00'
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.home_state_occupancy
      state: Away
    - condition: state
      entity_id: input_select.home_state_occupancy
      state: On vacation
  action:
  - service: switch.turn_on
    target:
      entity_id: switch.day_state
  mode: single
- id: '1635025233017'
  alias: deCONZ - Studiekamer TRADFRI Switch
  description: Switch to control light(s)
  use_blueprint:
    path: Gabriel/deconz-ikea-button-switch.yaml
    input:
      remote: d1a94aabb5cec38df255cc89d96a7a99
      take_control:
        entity_id:
        - input_boolean.studiekamer_control
      light: light.studiekamer_groep
      adaptive_lighting: switch.adaptive_lighting_ruimten
- id: '1635362394376'
  alias: TV - Spotify Audio Mode
  description: Sync and desync Ambilight Mode to Audio when Spotify is playing
  trigger:
  - platform: state
    entity_id: media_player.apple_tv
    attribute: app_id
    to: com.spotify.client
    id: sync
  - platform: state
    entity_id: media_player.apple_tv
    attribute: app_id
    from: com.spotify.client
    id: desync
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: sync
      sequence:
      - service: huesyncbox.set_sync_mode
        target:
          entity_id: media_player.play_sync_box
        data:
          mode: music
    - conditions:
      - condition: trigger
        id: desync
      sequence:
      - service: huesyncbox.set_sync_mode
        target:
          entity_id: media_player.play_sync_box
        data:
          mode: video
    default: []
  mode: single
- id: '1635414861833'
  alias: Scenes - Woonkamer
  description: Change scenes based on an Input Select
  trigger:
  - platform: event
    event_type: state_changed
    event_data:
      entity_id: input_select.woonkamer_scenes
  condition: []
  action:
  - service: script.generic_component_scenes
    data:
      room: Woonkamer
      lights: light.woonkamer_groep
      adaptive_lighting: switch.adaptive_lighting_woonkamer
      control: input_boolean.dummy_control
      helper: input_select.woonkamer_scenes
  mode: restart
- id: '1635416907472'
  alias: TV - Keep Lightstrip Off
  description: Turn off lightstrip if it's turned on while Ambilight is on
  trigger:
  - platform: state
    entity_id: light.play_gradient_lightstrip
    to: 'on'
    from: 'off'
  - platform: state
    entity_id: light.woonkamer_play_lichtbalk
    from: 'off'
    to: 'on'
  condition:
  - condition: state
    entity_id: light.ambilight
    state: 'on'
  action:
  - service: light.turn_off
    target:
      entity_id:
      - light.play_gradient_lightstrip
      - light.woonkamer_play_lichtbalk
  mode: parallel
  max: 2
- id: '1635855168121'
  alias: Scenes - Studiekamer
  description: Change scenes based on an Input Select
  trigger:
  - platform: event
    event_type: state_changed
    event_data:
      entity_id: input_select.studiekamer_scenes
  condition: []
  action:
  - service: script.generic_component_scenes
    data:
      room: Studiekamer
      lights: light.studiekamer_groep
      adaptive_lighting: switch.adaptive_lighting_ruimten
      control: input_boolean.studiekamer_control
      helper: input_select.studiekamer_scenes
  mode: restart
- id: '1635942495785'
  alias: deCONZ - Badkamer Hue Dimmer
  description: Switch to control light(s)
  use_blueprint:
    path: Gabriel/deconz-hue-remote-v2.yaml
    input:
      remote: a1221d49c3647cffa2f8d42365938310
      light: light.badkamer_lamp
      take_control:
        entity_id: input_boolean.badkamer_control
      adaptive_lighting: switch.adaptive_lighting_ruimten
- id: '1636015545472'
  alias: Location - Individual @ Home
  description: Individual automations to run, specifically when one of us comes home
  trigger:
  - platform: state
    entity_id: switch.shanna_home
    from: 'off'
    to: 'on'
    id: shanna
  - platform: state
    entity_id: switch.gabriel_home
    from: 'off'
    to: 'on'
    id: gabriel
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: shanna
      sequence: []
    - conditions:
      - condition: trigger
        id: gabriel
      sequence:
      - service: script.turn_on
        target:
          entity_id:
          - script.logic_easy_entry
    default: []
  mode: parallel
  max: 2
- id: '1636015750070'
  alias: Location - Individual @ Away
  description: Individual automations to run, specifically when one of us leaves
  trigger:
  - platform: state
    entity_id: switch.gabriel_home
    from: 'on'
    to: 'off'
    id: gabriel
  - platform: state
    entity_id: switch.shanna_home
    from: 'on'
    to: 'off'
    id: shanna
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: gabriel
      sequence:
      - service: script.generic_component_climate
        data:
          climate:
            entity_id: climate.studiekamer_radiator
          mode: Away
      - service: climate.turn_off
        target:
          entity_id: climate.tuya_duux_threesixty
    - conditions:
      - condition: trigger
        id: shanna
      sequence: []
    default: []
  mode: single
- id: '1636030085546'
  alias: TV - Ambilight-to-Lightstrip (Off)
  description: Automations to run when Ambilight turns off
  trigger:
  - platform: state
    entity_id: light.ambilight
    from: 'on'
    to: 'off'
    for:
      hours: 0
      minutes: 0
      seconds: 3
      milliseconds: 0
  condition:
  - condition: state
    entity_id: light.woonkamer_groep
    state: 'on'
  action:
  - service: light.turn_on
    target:
      entity_id:
      - light.play_gradient_lightstrip
      - light.woonkamer_play_lichtbalk
  mode: single
- id: '1636030887029'
  alias: TV - Lightstrip-to-Ambilight
  description: Automations to run when Ambilight turns on
  trigger:
  - platform: state
    entity_id: light.ambilight
    from: 'off'
    to: 'on'
    for:
      hours: 0
      minutes: 0
      seconds: 0
      milliseconds: 0
  condition: []
  action:
  - service: light.turn_off
    target:
      entity_id:
      - light.play_gradient_lightstrip
      - light.woonkamer_play_lichtbalk
  - service: adaptive_lighting.set_manual_control
    data:
      entity_id: switch.adaptive_lighting_woonkamer
      lights:
      - light.play_gradient_lightstrip
      - light.woonkamer_play_lichtbalk
  mode: single
- id: '1636111326399'
  alias: deCONZ - Woonkamer Friends of Hue Switch
  description: Switch to control light(s)
  use_blueprint:
    path: Gabriel/deconz-FoH-switch.yaml
    input:
      remote: cb34eb7664bdcfd14c8d2c2eda9f46af
      take_control:
        entity_id: input_boolean.dummy_control
      adaptive_lighting: switch.adaptive_lighting_woonkamer
      light_L: light.woonkamer_lamp
      light_R: light.woonkamer_eettafel_lamp
- id: '1636112922611'
  alias: deCONZ - Woonkamer TRADFRI Cover Switch
  description: Switch to control cover(s)
  use_blueprint:
    path: Gabriel/deconz-ikea-cover-switch.yaml
    input:
      remote: 09fd711a90b60a0b0d4d6190a2e440c1
      cover:
        entity_id:
        - cover.achterdeur_gordijn
        - cover.woonkamer_gordijn
- id: '1636298495983'
  alias: deCONZ - Badkamer IKEA Shortcut Button
  description: Button to control the light(s)
  use_blueprint:
    path: Gabriel/deconz-ikea-shortcut.yaml
    input:
      remote: 71dfa94e27d530837416cf1db88d8113
      press_button:
      - service: input_boolean.turn_on
        target:
          entity_id:
          - input_boolean.douche_occupancy_state
      - condition: state
        entity_id: light.badkamer_lamp
        state: 'off'
      - service: light.turn_on
        target:
          entity_id: light.badkamer_lamp
      hold_button:
      - service: light.turn_off
        target:
          entity_id: light.badkamer_lamp
- id: '1636382036921'
  alias: deCONZ - Nachtkastje L IKEA Shortcut Button
  description: Switch to set Nacht state
  use_blueprint:
    path: Gabriel/deconz-ikea-shortcut.yaml
    input:
      remote: 39f33242667ef784d39e67935dd6be80
      press_button:
      - condition: or
        conditions:
        - condition: state
          entity_id: input_select.home_state
          state: Evening
        - condition: state
          entity_id: input_select.home_state
          state: Night
      - service: switch.turn_on
        target:
          entity_id: switch.night_state
      - delay:
          hours: 0
          minutes: 0
          seconds: 1
          milliseconds: 0
      - service: light.turn_off
        target:
          entity_id: light.slaapkamer_groep
      hold_button:
      - service: light.turn_on
        target:
          entity_id: light.slaapkamer_groep
- id: '1636382062713'
  alias: deCONZ - Nachtkastje R IKEA Shortcut Button
  description: Switch to set Home State Occupancy to Sleeping
  use_blueprint:
    path: Gabriel/deconz-ikea-shortcut.yaml
    input:
      remote: 39f0032ded816ac1f3c922e48ae714d4
      press_button:
      - condition: or
        conditions:
        - condition: state
          entity_id: input_select.home_state
          state: Evening
        - condition: state
          entity_id: input_select.home_state
          state: Night
      - service: switch.turn_on
        target:
          entity_id:
          - switch.sleeping_occupancy
      - delay:
          hours: 0
          minutes: 0
          seconds: 1
          milliseconds: 0
      - service: light.turn_off
        target:
          entity_id: light.slaapkamer_groep
      hold_button:
      - service: light.turn_on
        target:
          entity_id:
          - light.slaapkamer_groep
- id: '1636382573171'
  alias: deCONZ - Slaapkamer IKEA Shortcut Button
  description: Button to control Day/Night and Sleeping states
  use_blueprint:
    path: Gabriel/deconz-ikea-shortcut.yaml
    input:
      remote: 30b8cc291032e96ea81f3d98b1243a3b
      press_button:
      - choose:
        - conditions:
          - condition: and
            conditions:
            - condition: state
              entity_id: input_select.home_state
              state: Evening
            - condition: state
              entity_id: input_select.home_state_occupancy
              state: Home
          sequence:
          - service: switch.turn_on
            target:
              entity_id: switch.sleeping_occupancy
        - conditions:
          - condition: and
            conditions:
            - condition: state
              entity_id: input_select.home_state
              state: Evening
            - condition: state
              entity_id: input_select.home_state_occupancy
              state: Sleeping
          sequence:
          - service: switch.turn_on
            target:
              entity_id: switch.night_state
        - conditions:
          - condition: and
            conditions:
            - condition: or
              conditions:
              - condition: state
                entity_id: input_select.home_state
                state: Night
              - condition: state
                entity_id: input_select.home_state
                state: Morning
            - condition: time
              after: 06:00
              before: '18:00'
          sequence:
          - service: switch.turn_on
            target:
              entity_id: switch.day_state
        default:
        - service: script.turn_on
          target:
            entity_id: script.dummy
      hold_button:
      - service: switch.turn_on
        target:
          entity_id: switch.night_state
- id: '1636925140619'
  alias: Home Occupancy - On vacation
  description: Automatically set Home Occupancy to On vacation
  trigger:
  - platform: state
    entity_id: input_select.home_state_occupancy
    to: Away
    for:
      hours: 12
      minutes: 0
      seconds: 0
      milliseconds: 0
  condition: []
  action:
  - service: input_select.select_option
    target:
      entity_id:
      - input_select.home_state_occupancy
    data:
      option: On vacation
  mode: single
- id: '1637656559452'
  alias: Shell - Auto Convert Lovelace
  description: Automatically convert Lovelace UI to readable yaml for git
  trigger:
  - platform: event
    event_type: lovelace_updated
  condition: []
  action:
  - service: shell_command.lovelace_convert
  mode: restart
- id: '1638273581987'
  alias: TV - Ambilight-to-Lightstrip (Pause)
  description: Automations to run when Ambilight turns off
  trigger:
  - platform: state
    entity_id: light.ambilight
    from: 'on'
    to: 'off'
    for:
      hours: 0
      minutes: 0
      seconds: 3
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: light.woonkamer_eettafel_lamp
      state: 'off'
    - condition: state
      entity_id: light.tarnaby_lamp
      state: 'off'
    - condition: state
      entity_id: light.globe_lamp
      state: 'off'
    - condition: state
      entity_id: light.edison_lamp
      state: 'off'
  action:
  - delay:
      hours: 0
      minutes: 0
      seconds: 2
      milliseconds: 0
  - service: light.turn_off
    target:
      entity_id:
      - light.play_gradient_lightstrip
      - light.woonkamer_play_lichtbalk
  mode: single
- id: '1639064553312'
  alias: TV - Ensure Apple TV turns off
  description: ''
  trigger:
  - platform: state
    entity_id: media_player.sony_bravia_tv
    from: playing
    to: 'off'
  condition: []
  action:
  - service: media_player.turn_off
    target:
      entity_id: media_player.apple_tv
  mode: single
- id: '1641221018864'
  alias: Security - Alarm TRIGGERED
  description: Actions to run when the security system is triggered
  trigger:
  - platform: state
    entity_id: alarm_control_panel.security_system
    to: triggered
  condition: []
  action:
  - service: script.turn_on
    target:
      entity_id:
      - script.action_sound_alarm
  - service: light.turn_on
    data: {}
    target:
      entity_id:
      - light.woonkamer_groep
      - light.slaapkamer_groep
      - light.gang_lamp
      - light.achtertuin_buitenlamp
      - light.voortuin_buitenlamp
  - service: light.turn_on
    data:
      brightness_pct: 100
    target:
      entity_id:
      - light.woonkamer_groep
      - light.slaapkamer_groep
      - light.gang_lamp
      - light.achtertuin_buitenlamp
      - light.voortuin_buitenlamp
  mode: single
- id: '1641654476195'
  alias: Scenes - Slaapkamer
  description: Change scenes based on an Input Select
  trigger:
  - platform: event
    event_type: state_changed
    event_data:
      entity_id: input_select.slaapkamer_scenes
  condition: []
  action:
  - service: script.generic_component_scenes
    data:
      room: Slaapkamer
      lights: light.slaapkamer_groep
      adaptive_lighting: switch.adaptive_lighting_slaapkamer
      control: input_boolean.slaapkamer_control
      helper: input_select.slaapkamer_scenes
  mode: restart
- id: '1641810613374'
  alias: Occupancy - Studiekamer (generic)
  description: Turn on light when activity is detected, dim after inactivity and turn
    off after a delay
  trigger:
  - platform: state
    entity_id: binary_sensor.studiekamer_occupancy
    to: 'on'
    from: 'off'
  condition:
  - condition: numeric_state
    entity_id: sensor.studiekamer_light_sensor
    below: '50'
  action:
  - service: script.generic_component_motion
    data:
      lights: light.studiekamer_groep
      adaptive_lighting: switch.adaptive_lighting_ruimten
      motion_sensor: binary_sensor.studiekamer_occupancy
      seconds_before_off: 30
  mode: restart
- id: '1642085148007'
  alias: Notifications - Software Update
  description: Notification when there is an update for software
  trigger:
  - platform: state
    entity_id: binary_sensor.deconz_update_available
    from: 'off'
    to: 'on'
    id: deconz
  - platform: state
    entity_id: binary_sensor.mesa_update_available
    from: 'off'
    to: 'on'
    id: dsm
  - platform: state
    entity_id: binary_sensor.ha_updater
    from: 'off'
    to: 'on'
    id: homeassistant
  - platform: state
    entity_id: binary_sensor.home_assistant_operating_system_update_available
    id: os
    from: 'off'
    to: 'on'
  - platform: numeric_state
    entity_id: sensor.hacs
    above: '0'
    id: community
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: deconz
      sequence:
      - service: script.generic_component_notifications
        data:
          software: deCONZ
          newest_version: '{{ states(''sensor.deconz_newest_version'') }}'
          version: '{{ states(''sensor.deconz_version'') }}'
          url: /hassio/dashboard
    - conditions:
      - condition: trigger
        id: dsm
      sequence:
      - service: script.generic_component_notifications
        data:
          software: Synology DSM
          newest_version: '{{ state_attr(''binary_sensor.mesa_update_available'',
            ''latest_available_version'') }}'
          version: '{{ state_attr(''binary_sensor.mesa_update_available'', ''installed_version'')
            }}'
          url: http://mesa-connect.quickconnect.to
    - conditions:
      - condition: trigger
        id: homeassistant
      sequence:
      - service: script.generic_component_notifications
        data:
          software: Home Assistant
          newest_version: '{{ state_attr(''binary_sensor.ha_updater'', ''latest_version'')
            }}'
          version: '{{ states(''sensor.current_version'') }}'
          more_information: The last backup was created {{ states('sensor.samba_relative_backup')
            }}.
          url: /config/dashboard
    - conditions:
      - condition: trigger
        id: os
      sequence:
      - service: script.generic_component_notifications
        data:
          software: Home Assistant OS
          newest_version: '{{ states(''sensor.home_assistant_operating_system_newest_version'')
            }}'
          version: '{{ states(''sensor.home_assistant_operating_system_version'')
            }}'
          more_information: The last backup was created {{ states('sensor.samba_relative_backup')
            }}.
          url: /config/dashboard
    - conditions:
      - condition: trigger
        id: community
      sequence:
      - service: script.generic_component_notifications
        data:
          software: Community Store
          url: /hacs/entry
    default: []
  mode: parallel
  max: 10
- id: '1642093402129'
  alias: Scenes - Play Gradient
  description: Change scenes based on an Input Select
  trigger:
  - platform: state
    entity_id: input_select.play_gradient_scenes
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: light.ambilight
        state: 'on'
      sequence:
      - service: light.turn_off
        target:
          entity_id: light.ambilight
      - delay:
          hours: 0
          minutes: 0
          seconds: 2
          milliseconds: 0
      - service: light.turn_on
        target:
          entity_id:
          - light.play_gradient_lightstrip
          - light.woonkamer_play_lichtbalk
    default: []
  - service: script.generic_component_scenes
    data:
      room: Woonkamer
      lights: light.play_gradient_lightstrip, light.woonkamer_play_lichtbalk
      adaptive_lighting: switch.adaptive_lighting_woonkamer
      control: input_boolean.dummy_control
      helper: input_select.play_gradient_scenes
  mode: restart
- id: '1643900184609'
  alias: Fan - Whisper Flex Modes
  description: Automation to set Whisper Flex modes using a helper.
  trigger:
  - platform: state
    entity_id: input_select.whisper_flex_modes
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: fan.whisper_flex
        state: 'off'
      sequence:
      - service: fan.turn_on
        data: {}
        target:
          entity_id: fan.whisper_flex
    default:
    - service: script.dummy
      data: {}
  - service: scene.turn_on
    data_template:
      entity_id: '{{ "scene.flex_" + states("input_select.whisper_flex_modes")|lower|replace("
        ", "_")|string }}'
  mode: single
- id: '1645609651066'
  alias: Energy - Set Active Tarrif
  description: ''
  trigger:
  - platform: time
    at: 07:00
    id: normaal_doordeweeks
  - platform: time
    at: '23:00'
    id: dal_doordeweeks
  condition:
  - condition: time
    weekday:
    - mon
    - tue
    - wed
    - thu
    - fri
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: normaal_doordeweeks
      sequence:
      - service: input_select.select_option
        data:
          option: Normaaltarief
        target:
          entity_id:
          - input_select.energy_stroomtarief
    - conditions:
      - condition: trigger
        id: dal_doordeweeks
      sequence:
      - service: input_select.select_option
        data:
          option: Daltarief
        target:
          entity_id:
          - input_select.energy_stroomtarief
    default: []
  mode: single
